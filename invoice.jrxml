<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="invoice" language="i18ngroovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="ef58b8f6-a59b-4d9c-94cb-c2089034d430">
	<property name="TRYTON_RELATIONS" value="[&apos;lines&apos;]"/>
	<property name="ireport.zoom" value="1.2100000000000035"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<subDataset name="taxes" uuid="5221ae81-f459-44b2-ac92-4babe070fc67">
		<parameter name="REWIND" class="java.lang.Object">
			<parameterDescription><![CDATA[]]></parameterDescription>
			<defaultValueExpression><![CDATA[$P{REPORT_DATA_SOURCE}.moveFirst()]]></defaultValueExpression>
		</parameter>
		<parameter name="INVOICE_ID" class="java.lang.String">
			<defaultValueExpression><![CDATA[$F{invoice_id}]]></defaultValueExpression>
		</parameter>
		<queryString language="xPath">
			<![CDATA[]]>
		</queryString>
		<field name="invoice_id" class="java.lang.String">
			<fieldDescription><![CDATA[/data/record/id]]></fieldDescription>
		</field>
		<field name="party-lang" class="java.lang.String">
			<fieldDescription><![CDATA[/data/record/party_lang-party_lang]]></fieldDescription>
		</field>
		<field name="taxes-base" class="java.lang.Number">
			<fieldDescription><![CDATA[/data/record/taxes-taxes/base-base]]></fieldDescription>
		</field>
		<field name="taxes-amount" class="java.lang.Number">
			<fieldDescription><![CDATA[/data/record/taxes-taxes/amount-amount]]></fieldDescription>
		</field>
		<field name="taxes-description" class="java.lang.String">
			<fieldDescription><![CDATA[/data/record/taxes-taxes/description-description]]></fieldDescription>
		</field>
		<field name="taxes-tax-rate" class="java.math.BigDecimal">
			<fieldDescription><![CDATA[/data/record/taxes-taxes/tax-tax/rate-rate]]></fieldDescription>
		</field>
		<field name="taxes-tax-type" class="java.lang.String">
			<fieldDescription><![CDATA[/data/record/taxes-taxes/tax-tax/type-type]]></fieldDescription>
		</field>
		<field name="taxes-tax-amount" class="java.lang.String">
			<fieldDescription><![CDATA[/data/record/taxes-taxes/tax-tax/amount-amount]]></fieldDescription>
		</field>
		<variable name="L" class="java.util.Locale">
			<variableExpression><![CDATA[$F{party-lang} != null && $F{party-lang}.length() == 5 ? new Locale($F{party-lang}) : ( $F{party-lang} != null && $F{party-lang}.length() == 2 ? new Locale($F{party-lang}) : new Locale('en_US'))]]></variableExpression>
			<initialValueExpression><![CDATA[$F{party-lang} != null && $F{party-lang}.length() == 5 ? new Locale($F{party-lang}) : ( $F{party-lang} != null && $F{party-lang}.length() == 2 ? new Locale($F{party-lang}) : new Locale('en_US'))]]></initialValueExpression>
		</variable>
		<filterExpression><![CDATA[($P{INVOICE_ID} == $F{invoice_id})]]></filterExpression>
	</subDataset>
	<subDataset name="lines_to_pay" uuid="2574814a-7d85-4740-b981-ff0baa86c908">
		<parameter name="REWIND" class="java.lang.Object">
			<parameterDescription><![CDATA[]]></parameterDescription>
			<defaultValueExpression><![CDATA[$P{REPORT_DATA_SOURCE}.moveFirst()]]></defaultValueExpression>
		</parameter>
		<parameter name="INVOICE_ID" class="java.lang.String">
			<defaultValueExpression><![CDATA[$F{invoice_id}]]></defaultValueExpression>
		</parameter>
		<queryString language="xPath">
			<![CDATA[]]>
		</queryString>
		<field name="invoice_id" class="java.lang.String">
			<fieldDescription><![CDATA[/data/record/id]]></fieldDescription>
		</field>
		<field name="party-lang" class="java.lang.String">
			<fieldDescription><![CDATA[/data/record/party_lang-party_lang]]></fieldDescription>
		</field>
		<field name="maturity_date-maturity_date" class="java.util.Date">
			<fieldDescription><![CDATA[/data/record/lines_to_pay-lines_to_pay/maturity_date-maturity_date]]></fieldDescription>
		</field>
		<field name="debit-debit" class="java.lang.Number">
			<fieldDescription><![CDATA[/data/record/lines_to_pay-lines_to_pay/debit-debit]]></fieldDescription>
		</field>
		<field name="credit-credit" class="java.lang.Number">
			<fieldDescription><![CDATA[/data/record/lines_to_pay-lines_to_pay/credit-credit]]></fieldDescription>
		</field>
		<variable name="L" class="java.util.Locale">
			<variableExpression><![CDATA[$F{party-lang} != null && $F{party-lang}.length() == 5 ? new Locale($F{party-lang}) : ( $F{party-lang} != null && $F{party-lang}.length() == 2 ? new Locale($F{party-lang}) : new Locale('en_US'))]]></variableExpression>
			<initialValueExpression><![CDATA[$F{party-lang} != null && $F{party-lang}.length() == 5 ? new Locale($F{party-lang}) : ( $F{party-lang} != null && $F{party-lang}.length() == 2 ? new Locale($F{party-lang}) : new Locale('en_US'))]]></initialValueExpression>
		</variable>
		<filterExpression><![CDATA[($P{INVOICE_ID} == $F{invoice_id})]]></filterExpression>
	</subDataset>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["/"]]></defaultValueExpression>
	</parameter>
	<parameter name="INVOICE_ID" class="java.lang.String"/>
	<parameter name="DUE_DS" class="java.lang.Object"/>
	<parameter name="TAXES_DS" class="java.lang.Object"/>
	<queryString language="xPath">
		<![CDATA[]]>
	</queryString>
	<field name="id" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/id]]></fieldDescription>
	</field>
	<field name="company-logo" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/company-company/logo-logo]]></fieldDescription>
	</field>
	<field name="company-name" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/company-company/party-party/name-name]]></fieldDescription>
	</field>
	<field name="company-vat_code" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/company-company/party-party/tax_identifier-tax_identifier/code-code]]></fieldDescription>
	</field>
	<field name="company-identifier" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/company-company/party-party/identifier_code-identifier_code]]></fieldDescription>
	</field>
	<field name="company-phone" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/company-company/party-party/phone-phone]]></fieldDescription>
	</field>
	<field name="company-email" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/company-company/party-party/email-email]]></fieldDescription>
	</field>
	<field name="company-zip" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/company-company/party-party/addresses-addresses/zip-zip]]></fieldDescription>
	</field>
	<field name="company-street" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/company-company/party-party/addresses-addresses/street-street]]></fieldDescription>
	</field>
	<field name="company-city" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/company-company/party-party/addresses-addresses/city-city]]></fieldDescription>
	</field>
	<field name="company-country" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/company-company/party-party/addresses-addresses/country-country/name-name]]></fieldDescription>
	</field>
	<field name="company-header" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/company-company/invoice_header-invoice_header]]></fieldDescription>
	</field>
	<field name="company-footer" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/company-company/invoice_footer-invoice_footer]]></fieldDescription>
	</field>
	<field name="company_background" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/company-company/invoice_background-invoice_background]]></fieldDescription>
	</field>
	<field name="company-invoice_qty" class="java.lang.Boolean">
		<fieldDescription><![CDATA[/data/record/company-company/invoice_qty-invoice_qty]]></fieldDescription>
	</field>
	<field name="party-full_name" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/party-party/full_name-full_name]]></fieldDescription>
	</field>
	<field name="party-name" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/party-party/addresses-addresses/name-name]]></fieldDescription>
	</field>
	<field name="party-code" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/party-party/code-code]]></fieldDescription>
	</field>
	<field name="party-street" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/party-party/addresses-addresses/street-street]]></fieldDescription>
	</field>
	<field name="party-zip" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/party-party/addresses-addresses/zip-zip]]></fieldDescription>
	</field>
	<field name="party-city" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/party-party/addresses-addresses/city-city]]></fieldDescription>
	</field>
	<field name="party-country-name" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/party-party/addresses-addresses/country-country/name-name]]></fieldDescription>
	</field>
	<field name="party-lang" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/party_lang-party_lang]]></fieldDescription>
	</field>
	<field name="party-vat_code" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/party-party/tax_identifier-tax_identifier/code-code]]></fieldDescription>
	</field>
	<field name="party-identifier" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/party-party/identifier_code-identifier_code]]></fieldDescription>
	</field>
	<field name="invoice-full_address_lang" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/invoice_address-invoice_address/full_address_lang-full_address_lang]]></fieldDescription>
	</field>
	<field name="invoice_date-invoice_date" class="java.util.Date">
		<fieldDescription><![CDATA[/data/record/invoice_date-invoice_date]]></fieldDescription>
	</field>
	<field name="number-number" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/number-number]]></fieldDescription>
	</field>
	<field name="reference-reference" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/reference-reference]]></fieldDescription>
	</field>
	<field name="type-type" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/type-type]]></fieldDescription>
	</field>
	<field name="state-state" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/state-state]]></fieldDescription>
	</field>
	<field name="description-description" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/description-description]]></fieldDescription>
	</field>
	<field name="origins-origins" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/origins-origins]]></fieldDescription>
	</field>
	<field name="comment-comment" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/comment-comment]]></fieldDescription>
	</field>
	<field name="payment_term-name" class="java.lang.Object">
		<fieldDescription><![CDATA[/data/record/payment_term-payment_term/name-name]]></fieldDescription>
	</field>
	<field name="payment_type-name" class="java.lang.Object">
		<fieldDescription><![CDATA[/data/record/payment_type-payment_type/name-name]]></fieldDescription>
	</field>
	<field name="payment_type-note" class="java.lang.Object">
		<fieldDescription><![CDATA[/data/record/payment_type-payment_type/note-note]]></fieldDescription>
	</field>
	<field name="user-name" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/create_uid-create_uid/name-name]]></fieldDescription>
	</field>
	<field name="user-email" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/create_uid-create_uid/email-email]]></fieldDescription>
	</field>
	<field name="line-quantity" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/lines-lines/quantity-quantity]]></fieldDescription>
	</field>
	<field name="line-note" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/lines-lines/note-note]]></fieldDescription>
	</field>
	<field name="line-description" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/lines-lines/description-description]]></fieldDescription>
	</field>
	<field name="line-unit_price" class="java.lang.Number">
		<fieldDescription><![CDATA[/data/record/lines-lines/unit_price-unit_price]]></fieldDescription>
	</field>
	<field name="line-amount" class="java.lang.Number">
		<fieldDescription><![CDATA[/data/record/lines-lines/amount-amount]]></fieldDescription>
	</field>
	<field name="line-discount" class="java.lang.Number">
		<fieldDescription><![CDATA[/data/record/lines-lines/discount-discount]]></fieldDescription>
	</field>
	<field name="line-type" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/lines-lines/type-type]]></fieldDescription>
	</field>
	<field name="line-tax-name" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/lines-lines/invoice_taxes-invoice_taxes/tax-tax/name-name]]></fieldDescription>
	</field>
	<field name="line-tax-rate" class="java.lang.Number">
		<fieldDescription><![CDATA[/data/record/lines-lines/invoice_taxes-invoice_taxes/tax-tax/rate-rate]]></fieldDescription>
	</field>
	<field name="line-tax-type" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/lines-lines/invoice_taxes-invoice_taxes/tax-tax/type-type]]></fieldDescription>
	</field>
	<field name="line-tax-amount" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/lines-lines/invoice_taxes-invoice_taxes/tax-tax/amount-amount]]></fieldDescription>
	</field>
	<field name="symbol-symbol" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/currency-currency/symbol-symbol]]></fieldDescription>
	</field>
	<field name="total_amount-total_amount" class="java.lang.Number">
		<fieldDescription><![CDATA[/data/record/total_amount-total_amount]]></fieldDescription>
	</field>
	<field name="tax_amount-tax_amount" class="java.lang.Number">
		<fieldDescription><![CDATA[/data/record/tax_amount-tax_amount]]></fieldDescription>
	</field>
	<field name="untaxed_amount-untaxed_amount" class="java.lang.Number">
		<fieldDescription><![CDATA[/data/record/untaxed_amount-untaxed_amount]]></fieldDescription>
	</field>
	<field name="gross_unit_price-gross_unit_price" class="java.lang.Number">
		<fieldDescription><![CDATA[/data/record/lines-lines/gross_unit_price-gross_unit_price]]></fieldDescription>
	</field>
	<field name="maturity_date-maturity_date" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/lines_to_pay-lines_to_pay/maturity_date-maturity_date]]></fieldDescription>
	</field>
	<field name="taxes-id" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/taxes-taxes/id]]></fieldDescription>
	</field>
	<variable name="L" class="java.util.Locale" resetType="Page">
		<variableExpression><![CDATA[$F{party-lang} != null && $F{party-lang}.length() == 5 ? new Locale($F{party-lang}) : ( $F{party-lang} != null && $F{party-lang}.length() == 2 ? new Locale($F{party-lang}) : 'en_US')]]></variableExpression>
		<initialValueExpression><![CDATA[$F{party-lang} != null && $F{party-lang}.length() == 5 ? new Locale($F{party-lang}) : ( $F{party-lang} != null && $F{party-lang}.length() == 2 ? new Locale($F{party-lang}) : 'en_US' )]]></initialValueExpression>
	</variable>
	<group name="Invoice" isStartNewPage="true" isResetPageNumber="true">
		<groupExpression><![CDATA[$F{id}]]></groupExpression>
		<groupHeader>
			<band height="116">
				<textField>
					<reportElement x="57" y="104" width="234" height="10" uuid="c2c7d40b-b91b-464c-b6b4-f6846d6e2e31"/>
					<textElement>
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[tr($V{L},"Description")]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="16" y="104" width="40" height="10" uuid="e76d2235-66e7-4b2f-bdcd-040d278bdf5d"/>
					<textElement textAlignment="Center">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[tr($V{L},"Qtat.")]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="369" y="104" width="50" height="10" uuid="3f773460-0745-4ba0-96ab-e1dfa90dc280"/>
					<textElement textAlignment="Right">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[tr($V{L},"Price")]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="490" y="104" width="48" height="10" uuid="a4d78f17-ce8b-4ee7-8477-6c03dc9fd71b"/>
					<textElement textAlignment="Right">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[tr($V{L},"Total")]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="305" y="6" width="240" height="93" uuid="5441748d-852a-4291-8837-2528fe11a658"/>
					<textElement markup="styled">
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA["<style isBold='true' pdfFontName='Helvetica'>"+$F{party-full_name}.replaceAll("&","&amp;")+"</style>\n"+$F{invoice-full_address_lang}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="10" y="6" width="290" height="21" forecolor="#010101" uuid="00682863-426c-400b-a17a-62686a001bd4"/>
					<textElement textAlignment="Left">
						<font size="12" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{type-type} .equals("out_credit_note") ? tr($V{L},"Credit Note")+" "+$F{number-number} : $F{state-state}.equals("validated") ? tr($V{L},"Pro-forma") : $F{state-state}.equals("draft") ? tr($V{L},"Quotation") : ($F{party-vat_code} || $F{party-identifier})? tr($V{L},"Invoice")+" "+$F{number-number} : tr($V{L},"Simplified Invoice")+" "+$F{number-number}]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="65" y="35" width="235" height="12" uuid="bcb43a8d-520e-44e8-8cb8-92664ef9dd0d">
						<printWhenExpression><![CDATA[$F{invoice_date-invoice_date} != '']]></printWhenExpression>
					</reportElement>
					<textElement>
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[new SimpleDateFormat("dd'-'MM'-'yyyy").format($F{invoice_date-invoice_date})]]></textFieldExpression>
				</textField>
				<line>
					<reportElement x="10" y="115" width="530" height="1" uuid="28e865b0-5cd4-498b-bb03-0d8fcb786a54"/>
				</line>
				<textField>
					<reportElement x="65" y="60" width="235" height="12" uuid="cb1d5d38-ba52-42f3-9314-1e44e614a39e"/>
					<textElement>
						<font fontName="SansSerif" size="9" isBold="false"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{reference-reference}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="424" y="104" width="41" height="10" uuid="f56afdfc-d236-4b76-bb62-e5f8415257dd"/>
					<textElement textAlignment="Left">
						<font size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[tr($V{L},"Tax Vat")]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="10" y="60" width="60" height="12" uuid="25c04a14-94c8-4cba-9c3d-3c9d90941873">
						<printWhenExpression><![CDATA[$F{reference-reference} != '']]></printWhenExpression>
					</reportElement>
					<textElement>
						<font size="9" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[tr($V{L},"Reference")+":"]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="65" y="48" width="235" height="12" uuid="e13c33aa-af2c-487d-8071-8f0889709f04"/>
					<textElement textAlignment="Left">
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{party-vat_code} ? $F{party-vat_code} : $F{party-identifier}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="10" y="35" width="60" height="12" uuid="dd409cc4-d552-476f-9753-3ea295c5686f">
						<printWhenExpression><![CDATA[$F{invoice_date-invoice_date} != '']]></printWhenExpression>
					</reportElement>
					<textElement>
						<font size="9" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[tr($V{L},"Date")+":"]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="10" y="48" width="60" height="12" uuid="8bc1a99d-8748-4ba7-983a-b6c33e6e96ae">
						<printWhenExpression><![CDATA[$F{party-vat_code} || $F{party-identifier}]]></printWhenExpression>
					</reportElement>
					<textElement>
						<font size="9" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[tr($V{L},"VAT")+":"]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="10" y="87" width="290" height="12" uuid="c8d8ce50-79c0-48ff-93e0-d5aa78c2bcd5"/>
					<textElement>
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{description-description}]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="64" y="74" width="236" height="12" uuid="03fa7508-be6d-40c7-a654-0f53d377cd6e">
						<printWhenExpression><![CDATA[$F{origins-origins} != '']]></printWhenExpression>
					</reportElement>
					<textElement>
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{origins-origins}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="9" y="74" width="60" height="12" uuid="600cbb38-dade-48d4-98b4-fa0e3a578aae">
						<printWhenExpression><![CDATA[$F{origins-origins} != '']]></printWhenExpression>
					</reportElement>
					<textElement>
						<font size="9" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[tr($V{L},"Origins")+":"]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="162" splitType="Prevent">
				<textField pattern="#,##0.00;-#,##0.00" isBlankWhenNull="false">
					<reportElement x="434" y="30" width="95" height="14" uuid="05b18839-fd5e-4786-a977-5ef1a341fa09"/>
					<textElement textAlignment="Right">
						<font fontName="DejaVu Sans" size="9" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{total_amount-total_amount} ? $F{total_amount-total_amount} : 0]]></textFieldExpression>
				</textField>
				<textField pattern="#,##0.00;-#,##0.00" isBlankWhenNull="false">
					<reportElement x="10" y="30" width="98" height="14" uuid="5f1b26d4-c154-44b2-b4fd-5c377b57477f"/>
					<textElement textAlignment="Left">
						<font size="9" isBold="false"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{untaxed_amount-untaxed_amount} ? $F{untaxed_amount-untaxed_amount} : 0]]></textFieldExpression>
				</textField>
				<textField pattern="#,##0.00;-#,##0.00" isBlankWhenNull="false">
					<reportElement x="255" y="30" width="98" height="14" uuid="b45d62d6-f732-4783-8678-80d9c3111e44"/>
					<textElement textAlignment="Left">
						<font size="9" isBold="false"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{tax_amount-tax_amount} ? $F{tax_amount-tax_amount} : 0]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="255" y="12" width="98" height="14" uuid="cb3c0a0e-50b4-4e64-b7e4-35051b84f429"/>
					<textElement>
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[tr($V{L},"Tax")]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="434" y="11" width="104" height="14" uuid="450bf171-530b-43e5-8cf0-042c7bde256c"/>
					<textElement textAlignment="Right">
						<font fontName="DejaVu Sans" size="9" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[tr($V{L},"Total")]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="10" y="12" width="98" height="14" uuid="d1051327-c8dc-413c-bfd1-66c78fd63c09"/>
					<textElement>
						<font size="9" isBold="false"/>
					</textElement>
					<textFieldExpression><![CDATA[tr($V{L},"Untaxed")]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true">
					<reportElement x="340" y="59" width="199" height="12" uuid="f98b73c2-40f5-4951-a74c-3c41ad8c3e4d">
						<printWhenExpression><![CDATA[$F{payment_term-name} != '']]></printWhenExpression>
					</reportElement>
					<textElement>
						<font size="9" isBold="false"/>
					</textElement>
					<textFieldExpression><![CDATA[tr($V{L},"Payment Term")+": "+$F{payment_term-name}.get($F{party-lang})]]></textFieldExpression>
				</textField>
				<line>
					<reportElement x="10" y="44" width="530" height="1" uuid="02b33d2b-0ffe-421e-8cc8-51001eb87daa"/>
				</line>
				<textField>
					<reportElement x="531" y="29" width="8" height="14" uuid="cca3d2b4-8c8e-4002-be1d-86ff49d5192a"/>
					<textElement>
						<font isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{symbol-symbol}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement x="10" y="121" width="531" height="36" isRemoveLineWhenBlank="true" uuid="953a6eb6-324b-4a19-b827-381bb75e1637"/>
					<textElement>
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{comment-comment}]]></textFieldExpression>
				</textField>
				<line>
					<reportElement x="10" y="25" width="530" height="1" uuid="3b2441e0-d347-40a9-877e-5c359698a821"/>
				</line>
				<textField>
					<reportElement x="340" y="74" width="199" height="12" uuid="cf0d63cf-238d-4158-9a90-d9f3202fa7a3">
						<printWhenExpression><![CDATA[$F{payment_type-name}.get($F{party-lang}) != null]]></printWhenExpression>
					</reportElement>
					<textElement>
						<font size="9" isBold="false"/>
					</textElement>
					<textFieldExpression><![CDATA[tr($V{L},"Payment Type")+": "+$F{payment_type-name}.get($F{party-lang})]]></textFieldExpression>
				</textField>
				<componentElement>
					<reportElement key="table 1" x="10" y="71" width="168" height="50" uuid="9bb63471-5005-4919-a92e-5b494fa8fd09">
						<property name="TRYTON_RELATIONS" value="taxes"/>
						<printWhenExpression><![CDATA[$F{taxes-id}.length() > 0]]></printWhenExpression>
					</reportElement>
					<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
						<datasetRun subDataset="taxes" uuid="d8ab3f36-e783-4348-b91d-994987cbb219">
							<datasetParameter name="INVOICE_ID">
								<datasetParameterExpression><![CDATA[$F{id}]]></datasetParameterExpression>
							</datasetParameter>
							<dataSourceExpression><![CDATA[$P{TAXES_DS}]]></dataSourceExpression>
						</datasetRun>
						<jr:column width="52" uuid="a5f33de6-26e1-4ed9-a249-228c92c3097c">
							<jr:tableHeader height="0" rowSpan="1"/>
							<jr:tableFooter height="0" rowSpan="1"/>
							<jr:columnHeader height="12" rowSpan="1">
								<textField>
									<reportElement x="2" y="0" width="50" height="11" uuid="f14e6e60-b01e-44c0-a405-a723df581b23"/>
									<textElement>
										<font size="9"/>
									</textElement>
									<textFieldExpression><![CDATA[tr($V{L},"Tax")]]></textFieldExpression>
								</textField>
								<line>
									<reportElement x="2" y="11" width="50" height="1" uuid="3b4e5c4b-9a24-41d3-bdff-9fc99f5376d0"/>
								</line>
							</jr:columnHeader>
							<jr:columnFooter height="0" rowSpan="1"/>
							<jr:detailCell height="12" rowSpan="1">
								<textField isStretchWithOverflow="true" pattern="#,##0.00;-#,##0.00" isBlankWhenNull="true">
									<reportElement x="2" y="0" width="50" height="12" uuid="7424f07c-807f-441e-b21b-21c3af2f075a"/>
									<textElement>
										<font size="9"/>
									</textElement>
									<textFieldExpression><![CDATA[$F{taxes-tax-type} == 'percentage' ? $F{taxes-tax-rate}*100+"%" : $F{taxes-tax-amount} ? $F{taxes-tax-amount} : '']]></textFieldExpression>
								</textField>
							</jr:detailCell>
						</jr:column>
						<jr:column width="64" uuid="e9da85f2-1b99-43cb-af18-1ae1a1ea83b2">
							<jr:tableHeader height="0" rowSpan="1"/>
							<jr:tableFooter height="0" rowSpan="1"/>
							<jr:columnHeader height="12" rowSpan="1">
								<textField>
									<reportElement x="0" y="0" width="64" height="11" uuid="4316886b-ddfd-41b3-88f7-38845a77c0ef"/>
									<textElement>
										<font size="9"/>
									</textElement>
									<textFieldExpression><![CDATA[tr($V{L},"Base")]]></textFieldExpression>
								</textField>
								<line>
									<reportElement x="0" y="11" width="64" height="1" uuid="57840f6f-a3b8-4f4c-ac34-bdbfa8e0119c"/>
								</line>
							</jr:columnHeader>
							<jr:columnFooter height="0" rowSpan="1"/>
							<jr:detailCell height="12" rowSpan="1">
								<textField pattern="#,##0.00" isBlankWhenNull="true">
									<reportElement x="0" y="0" width="64" height="12" uuid="95ba9998-be52-47ee-80d1-b65a1bba8c25"/>
									<textElement>
										<font size="9"/>
									</textElement>
									<textFieldExpression><![CDATA[$F{taxes-base}]]></textFieldExpression>
								</textField>
							</jr:detailCell>
						</jr:column>
						<jr:column width="51" uuid="8c49c7bf-5245-4525-9bf6-6f4799752f68">
							<jr:tableHeader height="0" rowSpan="1"/>
							<jr:tableFooter height="0" rowSpan="1"/>
							<jr:columnHeader height="12" rowSpan="1">
								<textField>
									<reportElement x="0" y="0" width="49" height="11" uuid="225026aa-06f5-483f-b93c-765523f9f64c"/>
									<textElement>
										<font size="9"/>
									</textElement>
									<textFieldExpression><![CDATA[tr($V{L},"Total")]]></textFieldExpression>
								</textField>
								<line>
									<reportElement x="0" y="11" width="51" height="1" uuid="665e8775-a1c2-432e-a2fe-c87efca04902"/>
								</line>
							</jr:columnHeader>
							<jr:columnFooter height="0" rowSpan="1"/>
							<jr:detailCell height="12" rowSpan="1">
								<textField isStretchWithOverflow="true" pattern="#,##0.00;-#,##0.00" isBlankWhenNull="true">
									<reportElement x="0" y="0" width="51" height="12" uuid="41e83f81-8ac9-4ff3-bcdb-02e3991c9389"/>
									<textElement>
										<font size="9"/>
									</textElement>
									<textFieldExpression><![CDATA[$F{taxes-amount}]]></textFieldExpression>
								</textField>
							</jr:detailCell>
						</jr:column>
					</jr:table>
				</componentElement>
				<componentElement>
					<reportElement key="table2" x="189" y="71" width="140" height="50" uuid="2f90e824-d446-42fb-9825-dd28077c2519">
						<property name="TRYTON_RELATIONS" value="lines_to_pay"/>
						<printWhenExpression><![CDATA[$F{maturity_date-maturity_date}.length() > 0]]></printWhenExpression>
					</reportElement>
					<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
						<datasetRun subDataset="lines_to_pay" uuid="8293224d-610b-47c7-ac51-b8b8b3ac7ba7">
							<datasetParameter name="INVOICE_ID">
								<datasetParameterExpression><![CDATA[$F{id}]]></datasetParameterExpression>
							</datasetParameter>
							<dataSourceExpression><![CDATA[$P{DUE_DS}]]></dataSourceExpression>
						</datasetRun>
						<jr:column width="70" uuid="c193e098-f837-4ffa-b449-cd871e55276f">
							<jr:tableHeader height="1" rowSpan="1"/>
							<jr:columnHeader height="12" rowSpan="1">
								<textField>
									<reportElement x="2" y="0" width="68" height="11" uuid="a752f346-1c00-4974-80ea-4149aaa0354b"/>
									<textElement>
										<font size="9"/>
									</textElement>
									<textFieldExpression><![CDATA[tr($V{L},"Maturity date")]]></textFieldExpression>
								</textField>
								<line>
									<reportElement x="2" y="11" width="68" height="1" uuid="c3fa28a3-8697-4b7b-a142-675a2b6efe57"/>
								</line>
							</jr:columnHeader>
							<jr:detailCell height="14" rowSpan="1">
								<textField pattern="dd/MM/yyyy">
									<reportElement x="2" y="0" width="68" height="12" uuid="061ee816-155d-4d40-8e20-2bb0b6411481"/>
									<textElement>
										<font size="9"/>
									</textElement>
									<textFieldExpression><![CDATA[$F{maturity_date-maturity_date}]]></textFieldExpression>
								</textField>
							</jr:detailCell>
						</jr:column>
						<jr:column width="70" uuid="104674c8-1dc8-42c8-84b0-8bfa99b239df">
							<jr:tableHeader height="1" rowSpan="1"/>
							<jr:columnHeader height="12" rowSpan="1">
								<textField>
									<reportElement x="0" y="0" width="70" height="11" uuid="4eb2a9a4-134f-4e05-b52a-77615b88ee5f"/>
									<textElement>
										<font size="9"/>
									</textElement>
									<textFieldExpression><![CDATA[tr($V{L},"Debit")]]></textFieldExpression>
								</textField>
								<line>
									<reportElement x="0" y="11" width="70" height="1" uuid="75cde5ed-b790-478c-b1e9-adbbd2310cce"/>
								</line>
							</jr:columnHeader>
							<jr:detailCell height="14" rowSpan="1">
								<textField pattern="#,##0.00;-#,##0.00" isBlankWhenNull="true">
									<reportElement x="0" y="0" width="70" height="12" uuid="ad68598f-930b-492f-ab79-b8fae2b98d0c"/>
									<textElement>
										<font size="9"/>
									</textElement>
									<textFieldExpression><![CDATA[$F{credit-credit} ? $F{debit-debit} ? $F{debit-debit}-$F{credit-credit} : 0-$F{credit-credit} : $F{debit-debit}]]></textFieldExpression>
								</textField>
							</jr:detailCell>
						</jr:column>
					</jr:table>
				</componentElement>
				<textField>
					<reportElement x="189" y="59" width="140" height="12" uuid="f4277fed-faf6-4521-8fd7-24496c595084">
						<printWhenExpression><![CDATA[$F{maturity_date-maturity_date}.length() > 0]]></printWhenExpression>
					</reportElement>
					<textElement>
						<font size="9" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[tr($V{L},"Due dates")]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="10" y="59" width="166" height="12" uuid="8d47cb48-94f8-4578-9e20-bc4568942364">
						<printWhenExpression><![CDATA[$F{taxes-id}.length() > 0]]></printWhenExpression>
					</reportElement>
					<textElement>
						<font size="9" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[tr($V{L},"Taxes")]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true">
					<reportElement x="340" y="89" width="199" height="30" uuid="9c25389b-7a6f-40a7-885a-9149f1b07294">
						<printWhenExpression><![CDATA[$F{payment_type-note}.get($F{party-lang}) != null]]></printWhenExpression>
					</reportElement>
					<textElement>
						<font size="9" isBold="false"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{payment_type-note}.get($F{party-lang})]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<background>
		<band height="800">
			<textField isStretchWithOverflow="true">
				<reportElement x="-13" y="0" width="13" height="800" forecolor="#808080" uuid="c5b12939-0dd3-4ede-a408-5683451a345b"/>
				<textElement textAlignment="Center" rotation="Left">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{company_background}]]></textFieldExpression>
			</textField>
		</band>
	</background>
	<pageHeader>
		<band height="68">
			<image>
				<reportElement x="10" y="8" width="280" height="60" uuid="8c1ee22b-4b4b-442c-bf74-5ee50f661100">
					<printWhenExpression><![CDATA[$F{company-logo}.length()>0]]></printWhenExpression>
				</reportElement>
				<imageExpression><![CDATA[$F{company-logo}]]></imageExpression>
			</image>
			<textField>
				<reportElement x="305" y="8" width="240" height="60" forecolor="#808080" uuid="4b921473-3454-4b7f-bbc4-7880d2924e66"/>
				<textElement textAlignment="Right">
					<font size="10"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{company-header}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<detail>
		<band height="16" splitType="Stretch">
			<textField isStretchWithOverflow="true">
				<reportElement x="16" y="2" width="474" height="12" uuid="a68e49fc-dca2-48bf-a369-91523da21914">
					<printWhenExpression><![CDATA[$F{line-type} == "title" || $F{line-type} == "comment" || $F{line-type} == "subtotal"]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Left" markup="styled">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{line-note} ? $F{line-description}+"\n<style forecolor=\"#808080\">"+$F{line-note}+"</style>" : $F{line-description}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="57" y="2" width="310" height="12" uuid="8cd45fbc-1218-4cf5-b806-bb43ae9c4879">
					<printWhenExpression><![CDATA[$F{line-type} == "line"]]></printWhenExpression>
				</reportElement>
				<textElement markup="styled">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{line-note} ? $F{line-description}+"\n<style forecolor=\"#808080\">"+$F{line-note}+"</style>" : $F{line-description}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00;-#,##0.00" isBlankWhenNull="false">
				<reportElement x="369" y="2" width="50" height="12" uuid="9975fb51-87f8-4217-9b9b-79f953d5f191">
					<printWhenExpression><![CDATA[$F{line-type} == "line"]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Right">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{gross_unit_price-gross_unit_price} ? $F{gross_unit_price-gross_unit_price} : $F{line-unit_price} ? $F{line-unit_price} : 0]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00;-#,##0.00" isBlankWhenNull="false">
				<reportElement x="490" y="2" width="50" height="12" uuid="0069eb56-2f17-4b11-8052-764bf45c8cc3">
					<printWhenExpression><![CDATA[$F{line-type} == "line" || $F{line-type} == "subtotal"]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Right">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{line-amount} ? $F{line-amount} : 0]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="466" y="2" width="25" height="12" uuid="95ea28c5-9c80-436e-8d91-88fcede8bb3d">
					<printWhenExpression><![CDATA[$F{line-type} == "line"]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Left">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{line-discount} ? "-"+ (int)Double.valueOf($F{line-discount}*100).doubleValue()+"%" : ""]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="16" y="2" width="40" height="12" uuid="d58b9b80-69a4-47c7-84d1-b55075f02ee9">
					<printWhenExpression><![CDATA[$F{line-type} == "line"]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Center">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{line-quantity} ? $F{company-invoice_qty} ? (int)Double.valueOf($F{line-quantity}.trim()).doubleValue() : Double.valueOf($F{line-quantity}.trim()).doubleValue() : '0']]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="424" y="2" width="41" height="12" uuid="2c99d035-234a-4f0c-b5db-99607b8b6ea7">
					<printWhenExpression><![CDATA[$F{line-type} == "line"]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Left">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{line-tax-type} == 'percentage' ? $F{line-tax-rate}*100+"%" : $F{line-tax-amount} ? $F{line-tax-amount} : '']]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="91" splitType="Stretch">
			<rectangle>
				<reportElement x="529" y="5" width="100" height="20" forecolor="#FEFEFE" backcolor="#A0A0A0" uuid="fd25e181-05bb-4acd-ad99-4d282ff754d3"/>
			</rectangle>
			<textField>
				<reportElement x="538" y="10" width="80" height="11" forecolor="#FCFCFC" uuid="68b6500e-5be6-40c4-82eb-ea239ef8351d"/>
				<textElement textAlignment="Left">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="12" y="13" width="304" height="11" forecolor="#808080" uuid="9a2b74c3-5558-4d60-bfa6-92531dc94a1e"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{company-street}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="12" y="25" width="304" height="11" forecolor="#808080" uuid="0784a45f-ad69-4fa1-998a-2c7653367bae"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{company-zip}+" "+$F{company-city}+" "+$F{company-country}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="12" y="49" width="343" height="12" forecolor="#808080" uuid="9ad92684-1300-4f81-8aec-5308978e7ac5"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["T. "+ $F{company-phone}+" "+$F{company-email}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement x="12" y="1" width="304" height="11" forecolor="#010101" uuid="5e992491-7712-43a5-8ac6-15c05a34f106"/>
				<textElement>
					<font size="9" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{company-name}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement x="12" y="37" width="304" height="11" forecolor="#808080" uuid="d3e1001e-bdb9-478b-b40f-49896a36b68e"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{company-vat_code} ? $F{company-vat_code} : $F{company-identifier}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement x="12" y="62" width="529" height="28" forecolor="#808080" uuid="c69d2c5d-8ae4-439d-92aa-47bc1c78c257"/>
				<textElement textAlignment="Center">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{company-footer}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
</jasperReport>
